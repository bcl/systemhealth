System Health Monitor
Copyright 2004 by Brian C. Lane <bcl@brianlane.com>
All Rights Reserved


This python program monitors your system's network interfaces, memory, load,
running processes and disk space (and inode usage). It creates Round Robin
Databases of the information and generates graphs every 5 minutes. It
includes a user friendly interactive setup mode, and it generates HTML files
suitable for inclusion in a webpage or local viewing.


This program requires a few things to work correctly.

1. Round Robin Database from Tobi Oetiker
   http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/

2. Python
   http://www.python.org

3. A web server or browser for viewing the summary pages


Installation and Setup

system_health.py should be run as a normal user. I suggest creating a new
user named health (or tommy or bob -- the name doesn't matter) and running
system_health.py from that user's crontab.

As root do the following:

# useradd health
# chmod ugo+x /home/health
# cp -p system_health.py /home/health/bin/
# chown -R health.health  /home/health/bin
# su - health

This creates a new user, named health in this case, and a bin directory for
system_health.py to run from.

Switch to the new user and run setup, which will create the health_rrd and
health_html directories, scan the system for network interfaces, drives and
running processes and prompt for which ones to monitor.

$ ./bin/system_health.py --setup

follow the prompts to select what network interfaces, drive partitions, and 
processes to monitor. Directories will be prompted for and created if they 
do not already exist (with a prompt before and a check for writeability).

Hit return to accept the defaults. All networks and drive partitions have a 
default of 'Y' and processes have a default of 'N'

Watch out for drives, some of the devices that are mounted aren't actual
drives and should be skipped.

Look in the ~/health_rrd and ~/health_html directories to makes sure the rrd
files and html files were created correctly.

Setup the crontab for the new user:

$ crontab -e

and add the following two lines:

*/5 * * * *     /home/health/bin/system_health.py --log 2>&1 /dev/null
*/5 * * * *     /home/health/bin/system_health.py --graph 2>&1 /dev/null


After it is running you can add other processes, drives and interfaces to
monitor by editing the ~/.syshealthrc file. For example to add monitoring of
the sshd daemon you would add the following line to the [processes] section:

sshd = sshd

And then regenerate the html and create the new rrd file by running this as
the health user:

./system_health --check --html


One thing to watch out for is that running --html will rewrite all the HTML
files, so if you have made any customizations to them they will be lost.


If you have any questions, comments, suggestions, etc. contact me at
bcl@brianlane.com (if you want to make sure your email makes it through my
carrier-class spam filtering you should add the word slartibartfast to the
subject line).


The Licenses

System Health Monitor is Licensed under a dual license based on the Software
Garden license written by Dan Bricklin. A copy of the licenses are in the
LICENSE file. There is one for non-commercial use and one for commercial
use. Basically this software is free for non-commercial use and $10 for
commercial users. See the LICENSE file for the details.

Payment can be made via paypal payment sent to bcl@brianlane.com

Thanks for using my software,

Brian C. Lane
August 8, 2004
The Basement
